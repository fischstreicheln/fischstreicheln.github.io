{%- assign show_lang = include.lang | default: "en" -%}
{%- if include.id -%}
  {%- assign id = include.id -%}
{%- else -%}
  {%- assign strip_txt = include.content | escape | strip | strip_newlines | remove: " " | md5 -%}
  {%- assign txt_size = strip_txt | size | minus: 1 -%}
  {%- assign gap = txt_size | divided_by: 4 | round | at_least: 1 -%}
  {%- assign start = -2 -%}
  {%- assign id ="" -%}
  {%- for i in (1..3) -%}
    {%- assign start = start | plus: gap | at_least: 0 | at_most: txt_size -%}
    {%- assign id = strip_txt | slice: start, 4 | prepend: id -%}
  {%- endfor -%}
{%- endif -%}
{%- assign show_id = id | prepend: "show-trigger-" -%}
{%- assign hide_id = id | prepend: "hide-trigger-" -%}
{%- assign code_id = id | prepend: "code-contents-" -%}
<div class="latex-image-code">
  <blockquote>
    <p>This is an image created with <strong>LaTeX</strong> using
      <a href="https://www.overleaf.com"><strong>Overleaf</strong></a>.
      Click here for full LaTeX code snippet of this image:
      <button class="show-trigger" id="{{ show_id }}" onclick="code_trigger('{{ show_id }}', '{{ hide_id }}', '{{ code_id }}')"> <a class="button"><strong>Show</strong></a></button>
      <button class="hide-trigger" id="{{ hide_id }}" onclick="code_trigger('{{ show_id }}', '{{ hide_id }}', '{{ code_id }}')"> <a class="button"><strong>Hide</strong></a></button>
    </p>
  </blockquote>
  <div class="code-contents" id="{{ code_id }}">
    {% highlight TeX %}
      {{ include.content }}
    {% endhighlight %}
  </div>
</div>
